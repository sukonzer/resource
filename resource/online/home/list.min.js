!function(t,e){var n=e(document),i=(e(document.body),e(window));e.drag=function(o,a,c){var l;o=e(o),containerName=o[0].id?"#"+o[0].id:"."+o[0].className,o.length<=0||(l="string"!=e.type(a)?containerName:containerName+" "+a,e(l).css("cursor","move"),n.on("mousedown",l,function(a){var l=o.offset(),s=a.pageX-l.left,r=a.pageY-l.top,d=online.getStyleName("user-select");"absolute"!=o.css("position")&&o.css("position","absolute"),o.setCapture?o.setCapture():t.captureEvents&&t.captureEvents("mousemove"),"function"===e.type(c)&&c(o),n.on({mouseup:function(){o.releaseCapture?o.releaseCapture():t.releaseEvents&&t.releaseEvents("mousemove"),"string"===e.type(d)?document.documentElement.style[d]="":(document.unselectable="off",document.onselectstart=null),n.off("mousemove").off("mouseup")},mousemove:function(t){var a=t.pageX-s,c=t.pageY-r;"string"===e.type(d)?document.documentElement.style[d]="none":(document.unselectable="on",document.onselectstart=function(){return!1}),a>i.width()-o.width()?a=i.width()-o.width():0>=a&&(a=0),c>n.height()-o.height()?c=n.height()-o.height():0>=c&&(c=0),o.css({left:a,top:c})}})}))}}(window,jQuery),function(t){var e,n=t(document),i=(t(document.body),t(window)),o=function(e){var n={drag:!1,stop:!0,title:"温馨提示",msg:"",width:"300px",opacity:.3,close:!0,cancel:"取消",ok:"确认",isHide:!0,zIndex:999,tmpl:'<div class="popup">{{if close}}<button type="button" class="close" title="关闭" aria-hidden="true">&times;</button>{{/if}}{{if title}}<div class="hd">${title}</div>{{/if}}<div class="bd">${msg}</div>{{if ok || cancel}}<div class="ft">{{if ok}}<a href="javascript:;" class="btn btn-primary" aria-label="ok">${ok}</a>{{/if}}{{if cancel}}<a href="javascript:;" class="btn btn-default" aria-label="cancel">${cancel}</a>{{/if}}</div>{{/if}}</div>',loadedCallback:null,okCallback:null,cancelCallback:null,closeCallback:null};t.extend(this,n,e),this.init()};t.extend(o.prototype,{init:function(){var o=this;this.mask=e,e?this.mask.show():(__container__.append('<div id="Pop__maskLayer__"></div>'),this.mask=e=t("#Pop__maskLayer__"),this.mask.css({position:"absolute",top:0,left:0,"background-color":"#000","z-index":o.zIndex-2,opacity:o.opacity,width:i.width(),height:n.height()})),this.mask.after('<div id="Pop__container__" style="width:'+o.width+";z-index:"+o.zIndex+'"></div>'),this.container=t("#Pop__container__"),this.container.html(t.tmpl.render(this.tmpl,this)),"function"===t.type(this.loadedCallback)&&this.loadedCallback.call(this,this.container),this.container.css({position:"absolute",left:(i.width()-this.container.width())/2,top:(i.height()-this.container.height())/2}),this.drag&&t.drag(this.container,".hd"),this.addEvent()},addEvent:function(){var e=this;n.on("click","[aria-label=ok]",function(n){e.stop&&(online.preventDefault(n),online.stopPropagation(n)),"function"===t.type(e.okCallback)&&e.okCallback.call(e,e.container,n),e.isHide&&e.closePop()}).on("click","[aria-label=cancel]",function(n){e.stop&&(online.preventDefault(n),online.stopPropagation(n)),"function"===t.type(e.cancelCallback)&&e.cancelCallback.call(e,e.container,n),e.closePop()}).on("click","[aria-hidden=true]",function(n){e.stop&&online.stopPropagation(n),"function"===t.type(e.closeCallback)&&e.closeCallback.call(e,e.container,n),e.closePop()})},closePop:function(){this.container.remove(),this.mask.hide()}}),t.dialog=function(t){return new o(t)}}(jQuery),window.edit=function(t){$.dialog({drag:!0,width:"500px",opacity:0,loadedCallback:function(){this.container.find(".bd").html($.tmpl.render($("#ListTmpl").html(),t))}})},$(".table").on("click","[aria-action=del]",function(){var t=$(this),e=t.closest("tr");e.slideUp(500,function(){$(this).remove()})}).on("click","[scope=controll]>input",function(){var t=($(this),$("[scope=row]>input"));t.each(function(t,e){$(e).trigger("click")})}).on("click","[scope=row]>input",function(){var t=$(this),e=t.closest("tr");e[t[0].checked?"addClass":"removeClass"]("active")});